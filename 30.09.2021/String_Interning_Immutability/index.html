<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
     <title>String - Interning & Immutability</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/ace.js" integrity="sha512-GZ1RIgZaSc8rnco/8CXfRdCpDxRCphenIiZ2ztLy3XQfCbQUSCuk8IudvNHxkRA3oUg6q0qejgN/qqyG1duv5Q==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/ext-language_tools.min.js" integrity="sha512-8qx1DL/2Wsrrij2TWX5UzvEaYOFVndR7BogdpOyF4ocMfnfkw28qt8ULkXD9Tef0bLvh3TpnSAljDC7uyniEuQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Asap:ital,wght@1,500&family=Fredoka+One&family=Marck+Script&family=Merienda:wght@700&family=Parisienne&family=Source+Code+Pro:wght@600&family=Varela+Round&display=swap" rel="stylesheet">
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/highlight.js@11.2.0/styles/monokai.css"
    />
  <link href="https://fonts.googleapis.com/css2?family=Mulish:wght@300&family=Source+Code+Pro:wght@300&family=Spartan:wght@500&display=swap" rel="stylesheet">
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
      integrity="sha512-1ycn6IcaQQ40/MKBW2W4Rhis/DbILU74C1vSrLJxCq57o941Ym01SwNsOMqvEBFlcgUa6xLiPY/NS5R+E6ztJQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="style.css">
   <!--  <link rel="stylesheet" href="query.css"> -->


  </head>
  <body>
  <div class="article1">
    <div class="article-1-outerbox">
        <div class="Circles hide-on-med-and-down">
          <div class="c1"></div>
          <div class="c2"></div>
        </div>
        <div class="topic-name">
            <p>String - Interning & Immutability
            </p> 
        </div>
        <a class="ca3-scroll-down-link ca3-scroll-down-arrow " data-ca3_iconfont="ETmodules" data-ca3_icon="">
            <i class="fa fa-chevron-down"></i>
        </a>
        <br><br><br><br>
        <div class="qoute">
            <br><br>
            <p>
              “It is an immutable law in business that words are words, explanations are explanations, promises are promises-but only performance is reality.”<br>-Harold S. Geneen
             </p>
            
            <i class="fa fa-quote-right qoute-icon"></i>
        </div>
    </div>
    <div class="question-logo"><i class="fa fa-quora"></i></div>
    <div class="ques-info">String - Interning & Immutability</div>
    <div class="article-info">
        <div class="article-divider" style="margin-top:0px ;"></div>
        <div class="article-content">
          <div class="content">
            <p>Welcome back reader!!
            </p>
            <p> I am bringing to you what I had promised, memory management in Strings and Immutable nature of Strings.

            </p>
            <p>Please watch this introductory video on Strings in Java, to learn about the basics of strings before jumping onto this article. 

            </p>
            <!-- <p>So, moving forward, in this article we’ll be searching for a given element in a 2D array. But, it's no ordinary array, it’s sorted in the rows as well as the columns.
            </p> -->
            <p><b>Important Links :</b> <a href="https://www.pepcoding.com/resources/online-java-foundation/string,-string-builder-and-arraylist/strings-intro-official/video">Strings</a> </p>
            <p>After watching the basic introduction to strings, you should watch this video to learn about the concepts which I am going in this article as well.
            </p>

          <p><b>Important Links :</b> <a href="https://www.pepcoding.com/resources/online-java-foundation/string,-string-builder-and-arraylist/string-interning-immutability/video">this video</a> </p>
           
         <p>Let’s start with the simplest approach possible.
        </p>
          </div>
        </div>  
        <div class="approach" id="approach">
          <div class="sub-heading-2">Memory Management & String Interning
          </div>
            <div class="content">
              <p>There are majorly two types of memory associated with a program, that are stack memory and heap memory. You should keep in mind that only primitive data-types: Byte, Short, Int, Long, Double, Float, Char and Boolean are stored directly in stack memory.

              </p>
              <p>Since, strings are non-primitive data types in Java, hence they are not stored directly in stack memory. Instead, they are created in the heap memory and just a reference to this location is held by the stack memory.

              </p>

              <p>But, there is a catch here! There is a special area or segment of heap memory known as intern pool. Strings in Java are created in this area known as intern pool
                </p>
                <!-- <p>Since, you are traversing each and every element of the matrix, the time-complexity will be O(m*n), as in a matrix of n rows and m columns, you have m*n elements.
                </p> -->
                <p>Let us take an example of three strings declared in the following manner:
                </p>
                <!-- <p>So, let’s see the solution for this one.
                </p> -->
                <div class="img"><img class="articleImages" name="string_interning_immutability_1.png" alt="img" /></div>
                
             
                
              <p>
                Statement 1, will make a string of 5 characters “hello” in the intern pool, let us suppose, at starting address = 4k. And this address (4k) is stored in the stack memory with s1 holding the address.
              </p>
              <p>Now, Statement 2, will make another string of 5 characters “hello” in the intern pool….! Not really my friend, it is not that simple. Read carefully!
              </p>
              <p>First, a character array {‘h’,’e’,’l’,’l’,’o’} is searched in the intern pool. If it already exists (which in this case, is yes as string at location 4k = “hello” is already present), then JVM (Java Virtual Machine) will not create another string “hello” in the intern pool. Instead, it will store the reference of the same 4k location for the s2 string as well. Hence, now 2 strings s1 and s2 point to the same “hello” literal in the intern pool.
              </p>
              <div class="img"><img class="articleImages" name="string_interning_immutability_2.png" alt="img" /></div>

              <p>If it would have been not present, then JVM would have created another string literal and allocated a new memory location to the String.


              </p>
              <p>This process of searching for an identical string literal in the intern pool, and if present, sharing the same memory of string literal for different strings is known as String Interning in Java.

              </p>
               <p>We have covered WHAT is interning and HOW it takes place, but WHY interning takes place? What is the need or it’s advantages?

              </p>
              <!-- <div class="youtube-video">
                <iframe width="560" height="315" src="https://www.youtube.com/embed/j6BgMBIOCLQ" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
              </div> -->
                <!-- <div class="img"><img class="articleImages" name="introduction_to_graphs_and_its_represtation_1.png" alt="img" /></div> -->
                <p>
                  Is there a way to <b>avoid String Interning?</b></p>
              <p>Yes, we can create the strings using the new keyword. This will create a new shell object outside of the intern pool (with a new address) for the string. 
              </p>
              <p>But, there is still a problem. If there will be an identical character array, then this shell object will also point to the same character array.
              </p>
              <p>For statement 3, a new shell object will be created at location, say 5k, but, in this case also, the shell object will point to the same character array at location 4k, since it contains the string “hello”.
              </p>
              <div class="img"><img class="articleImages" name="string_interning_immutability_3.png" alt="img" /></div>
              <p>So, we have seen WHAT, HOW & WHY of Interning. But what are the impacts of doing <b>String Interning?</b> Two major impacts are the unexpected result in String comparisons and it makes Strings Immutable.
              </p>
              <p><b>Comparison operator (==) vs equals() method
              </b></p>
              <p>We should avoid using == operator for comparing strings. Let us know why?
              </p>
              <p>What do you think will be output of two comparison operations:
              </p>
              <ul>
                <li>Is s1 == s2?
                </li>
                <li>Is s1 == s3?
                </li>
              </ul>
              <p>You might have guessed that those operations will give the result ‘true’. But, only the first operation will meet your expectations. The result of s1 == s3 will be ‘false’.</p>
              <p>It is because, in stack memory, s1 is pointing to 4k memory location whereas s3 is pointing to a different memory location (5k), now JVM will not check whether the shell object of s3 at 5k is pointing to the same character array or not. It will just return false.
              </p>
              <p>Hence, even after s1 = “hello” and s3 = “hello”, the result will be false as s3 is initialized using the new keyword.
              </p>
              <p>To compare strings in java, we should make a habit to always use equals() method. s1.equals(s2) will be directly returned true as both point to the same (4k) memory location. </p>
              <p>Now, s1.equals(s3) will not be returned false even if both point to different memory locations, instead they will now be checked whether they are equal character-by-character or not. Since both are “hello”, it will also return true.
              </p>
              <div class="img"><img class="articleImages" name="string_interning_immutability_4.png" alt="img" /></div>
            </div>
              <div class="sub-heading-2">Q) What is IMMUTABILITY of Strings?</div>
              <div class="content">
                <p>If you look for the meaning of immutability in English dictionary, you will find it means ‘which cannot be changed/modified’.  Does it mean that Strings cannot be changed in Java? Well, a proper answer is:
                </p>
                <p>‘Reference is mutable, instance is not.’
                  Once a string object is created, its data or state can't be changed but the string can point to another character array.
                  </p>
                  <p>If we try to modify s1 as : s1 = “bye”, then what will happen? Will the character array {h, e, l, l, o} which is not only being pointed by s1 but also by s2, change? 
                  </p>
                  <p>No, but a new object will be created with a character array {b, y, e} and s1 will now start pointing to this new address location. 
                  </p>
                  <div class="img"><img class="articleImages" name="string_interning_immutability_5.png" alt="img" /></div>
              <p>Hence, the reference of string (in stack memory) is mutable, but the instance (character array in intern pool) is immutable.
              </p>
             </div>
             <div class="sub-heading-2">Q) But, why does Immutability occur in the first place?</div>
             <div class="content">
               <p>Let us assume, if you were allowed to modify the instance of string, i.e. modify the character array {h, e, l, l, o} in the intern pool, then what would have been the consequences?
              </p>
              <p>Since the character array at 4k location is pointed by more than 1 string, modifying the character array itself would have led to modification of all the strings which are pointing it. 
              </p>
              <p>For example), if we would have changed s1’s character at 3rd index to say ‘d’, then character array would have been modified to {h, e, d, l, o}, hence the character at 3rd index for the string s2 would also have changed to ‘d’.
              </p>

              <p>This can be a surprise to the developer who does not know about the existence of string s1, but is working on a module which uses string s2. He would wonder why s2 has become “hedlo”, but he himself initialized it to “hello”.
              </p>
              <p>Thus, to avoid such surprises, it is not allowed to modify the instance of strings in Java. <b>Strings are immutable in java as an immediate cause of string interning.</b>
              </p>
            </div>
            <div class="sub-heading-2">Q) What is the impact of Immutability?
            </div>
            <div class="content">
              <p>Immutability can lead to low performance issues, both in terms of space and time. Consider the following example:
              </p>
              <div class="img"><img class="articleImages" name="string_interning_immutability_6.png" alt="img" /></div>
              <p>What do you think will be the time complexity of the above code? Will it be O(n), as we are adding only 1 character n times? 
              </p>
              <p>No, the time complexity of the above piece of code is as bad as O(n2).  As we have discussed earlier, that instance of string cannot be modified, hence adding a character to the end of string does not mean it will get appended in the end of the character array.
              </p>
              <p>Instead, even if a single character is appended, firstly JVM will create a new string object, copy all of the characters present to the new string, and then append the single character to the newly created string object. Hence we are first copying the entire string which is O(n) work even for appending a single character. 
              </p>
              <p>And since we are appending single character for n times, the overall time complexity will turn out to be O(n * n) = O(n2). 
              </p>
              <p>For example) to add character ‘d’ to string s = “hello”, we have to first make a new string object, then copy all characters {h, e, l, l, o} to the new string and append ‘d’ to the new string. Hence we are not operating on 1 character, but s.length() + 1 characters. 
              </p>
              <p>So, consider if the current string is taking 2GB space in memory, then adding a single character will lead to creation of a copy of the string of entire 2GB and appending 1 character (of few byte(s)) to it.
              </p>
              <p>This is not what we expected! So, is there any way to make MUTABLE STRINGS IN JAVA? Yes, there is a concept of <b>StringBuilder Class</b> which we will learn in our next video lecture.
              </p>
              <p>This much information would have been difficult to swallow in one go. Hence, I recommend you to watch the video and read the article again to have a better understanding.</p>
              <p> Thankyou and Happy Coding!</p>
            </div>


                
             
            </div>
          </div> 
        <div class="article-tags">
         
          <div class="tag">  Arrays </div>
        </div>
        <div class="author">
          <div class="sub-heading-2">Author:
                <span>  Archit Aggarwal 


                </span>
          </div>
        </div>
        <div class="share-options">
            <p class="share-options-heading">Share this article</p>
            <div class="">
                <div class="span"><i class="fa fa-facebook"></i>
                    <p class="social-media-name">Facebook</p>
                </div>
                <div class="span"><i class="fa fa-twitter"></i>
                    <p class="social-media-name">Twitter</p>
                </div>
                <div class="span"><i class="fa fa-instagram"></i>
                    <p class="social-media-name">Instagram</p>
                </div>
                <div class="span"><i class="fa fa-whatsapp"></i>
                    <p class="social-media-name">Whatsapp</p>
                </div>
                <div class="span"><i class="fa fa-linkedin"></i>
                    <p class="social-media-name">Linkedin</p>
                </div>
            </div>
        </div>
        <div class="lineBreak" style="margin-top: 30px;"></div>
        <div class="img-zoom-div">
            <div class="img-zoom-div-close-btn"><i class="fa fa-times"></i></div>
            <div class="img-zoom-div-img"><img src="" alt="" /></div>
        </div>
      </div>
</div>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link
    href="https://fonts.googleapis.com/css2?family=Asap:ital,wght@1,500&family=Fredoka+One&family=Marck+Script&family=Merienda:wght@700&family=Parisienne&family=Source+Code+Pro:wght@600&family=Varela+Round&display=swap"
    rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.2.0/styles/monokai.css" />
<link
    href="https://fonts.googleapis.com/css2?family=Mulish:wght@300&family=Source+Code+Pro:wght@300&family=Spartan:wght@500&display=swap"
    rel="stylesheet">
</div>


    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.min.js"></script>
    <script>
      hljs.initHighlightingOnLoad();
    </script>
    <script src="./closeZoomImgDiv.js"></script>
    <script src="./bookmark.js"></script>
    <script src="/ace-builds/src-noconflict/ace.js" type="text/javascript" charset="utf-8"></script>
<script>



    var aceEditorInstance = ace.edit( "editor1" );


aceEditorInstance.setTheme("ace/theme/twilight");
// inline must be true to syntax highlight
aceEditorInstance.getSession().setMode( { path: "ace/mode/c_cpp", inline: true } );

// editor 2
  var aceEditorInstance2 = ace.edit( "editor2" );


aceEditorInstance2.setTheme("ace/theme/twilight");
// inline must be true to syntax highlight
aceEditorInstance2.getSession().setMode( { path: "ace/mode/c_cpp", inline: true } );

// editor 3
  var aceEditorInstance3 = ace.edit( "editor3" );


aceEditorInstance3.setTheme("ace/theme/twilight");
// inline must be true to syntax highlight
aceEditorInstance3.getSession().setMode( { path: "ace/mode/c_cpp", inline: true } );
/**
 * Global variable to store the ids of the status of the current dragged ace editor.
 */
window.draggingAceEditor = {};

function makeAceEditorResizable(editor){
    var id_editor = editor.container.id;
    var id_dragbar = '#' + id_editor + '_dragbar';
    var id_wrapper = '#' + id_editor + '_wrapper';
    var wpoffset = 0;
    window.draggingAceEditor[id_editor] = false;

    $(id_dragbar).mousedown(function(e) {
        e.preventDefault();

        window.draggingAceEditor[id_editor] = true;
    
        var _editor = $('#' + id_editor);
        var top_offset = _editor.offset().top - wpoffset;
    
        // Set editor opacity to 0 to make transparent so our wrapper div shows
        _editor.css('opacity', 0);
    
        // handle mouse movement
        $(document).mousemove(function(e){
            var actualY = e.pageY - wpoffset;
            // editor height
            var eheight = actualY - top_offset;
            
            // Set wrapper height
            $(id_wrapper).css('height', eheight);
            
            // Set dragbar opacity while dragging (set to 0 to not show)
            $(id_dragbar).css('opacity', 0.15);
        });
    });
    
    $(document).mouseup(function(e){
        if (window.draggingAceEditor[id_editor])
        {
            var ctx_editor = $('#' + id_editor);
    
            var actualY = e.pageY - wpoffset;
            var top_offset = ctx_editor.offset().top - wpoffset;
            var eheight = actualY - top_offset;
    
            $( document ).unbind('mousemove');
            
            // Set dragbar opacity back to 1
            $(id_dragbar).css('opacity', 1);
            
            // Set height on actual editor element, and opacity back to 1
            ctx_editor.css('height', eheight).css('opacity', 1);
            
            // Trigger ace editor resize()
            editor.resize();

            window.draggingAceEditor[id_editor] = false;
        }
    });
}


makeAceEditorResizable(aceEditorInstance);



</script>

<script>
    var run = document.getElementsByClassName('run')[0]
    var input = document.getElementById('custom_input')
    var language = document.getElementById('language')
    

    run.addEventListener('click', function(){
        
        var unformatted = document.getElementById('editor1').innerText
        var formatted = unformatted.split("\n")
        var final = []
        formatted.forEach(ele=>{
            if(!parseInt(ele))
            final.push(ele)
        
        })
        final = final.join(' ')
        
        var input_text = input.value
        var final_input_text = input_text.split('\n').join(' ')


         
        //language
        const languageValue = language.options[language.selectedIndex].value;
        //const text = language.options[language.selectedIndex].text;
        
        //fetch statement here...

        // fetch('/compileCode',{
        //     method:'post',
        //     headers:{
        //         'Content-Type':'appliation/json'
        //     },
        //     body:JSON.stringify({
        //         input:final_input_text,
        //         code:final,
        //         language:languageValue
        //     })
        // })

             
        alert(JSON.stringify({"code":final, "testcase":final_input_text, "language": languageValue}))
        }
    )
</script>
<script>
    //tabbar btn control
    function tabBar(index){
       
        if(index===0){ 
            // show input textarea
            document.getElementById('custom_output').style.display='none'
            document.getElementById('custom_input').style.display='block'
            document.getElementById('tabBar_0').style.color='rgba(0, 0, 0, 1)'
            document.getElementById('tabBar_1').style.color='rgba(0, 0, 0, 0.479)'
        }
        else{
            // show output textarea
            document.getElementById('custom_output').style.display='block'
            document.getElementById('custom_input').style.display='none'
            document.getElementById('tabBar_1').style.color='rgba(0, 0, 0, 1)'
            document.getElementById('tabBar_0').style.color='rgba(0, 0, 0, 0.479)'
        }
    }
    
</script>
  </body>
</html>
